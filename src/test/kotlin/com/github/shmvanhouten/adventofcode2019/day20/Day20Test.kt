package com.github.shmvanhouten.adventofcode2019.day20

import com.natpryce.hamkrest.assertion.assertThat
import com.natpryce.hamkrest.equalTo
import org.junit.jupiter.api.Nested
import org.junit.jupiter.api.Test

class Day20Test {

    @Nested
    inner class Part1 {

        @Test
        internal fun `test input 1`() {
            val input = """
                        |         A           
                        |         A           
                        |  #######.#########  
                        |  #######.........#  
                        |  #######.#######.#  
                        |  #######.#######.#  
                        |  #######.#######.#  
                        |  #####  B    ###.#  
                        |BC...##  C    ###.#  
                        |  ##.##       ###.#  
                        |  ##...DE  F  ###.#  
                        |  #####    G  ###.#  
                        |  #########.#####.#  
                        |DE..#######...###.#  
                        |  #.#########.###.#  
                        |FG..#########.....#  
                        |  ###########.#####  
                        |             Z       
                        |             Z       """.trimMargin()
            assertThat(
                findQuickestPath(parsePortalDonut(input)),
                equalTo(23)
            )
        }

        @Test
        internal fun `test input 2`() {
            val input = """
                        |                   A               
                        |                   A               
                        |  #################.#############  
                        |  #.#...#...................#.#.#  
                        |  #.#.#.###.###.###.#########.#.#  
                        |  #.#.#.......#...#.....#.#.#...#  
                        |  #.#########.###.#####.#.#.###.#  
                        |  #.............#.#.....#.......#  
                        |  ###.###########.###.#####.#.#.#  
                        |  #.....#        A   C    #.#.#.#  
                        |  #######        S   P    #####.#  
                        |  #.#...#                 #......VT
                        |  #.#.#.#                 #.#####  
                        |  #...#.#               YN....#.#  
                        |  #.###.#                 #####.#  
                        |DI....#.#                 #.....#  
                        |  #####.#                 #.###.#  
                        |ZZ......#               QG....#..AS
                        |  ###.###                 #######  
                        |JO..#.#.#                 #.....#  
                        |  #.#.#.#                 ###.#.#  
                        |  #...#..DI             BU....#..LF
                        |  #####.#                 #.#####  
                        |YN......#               VT..#....QG
                        |  #.###.#                 #.###.#  
                        |  #.#...#                 #.....#  
                        |  ###.###    J L     J    #.#.###  
                        |  #.....#    O F     P    #.#...#  
                        |  #.###.#####.#.#####.#####.###.#  
                        |  #...#.#.#...#.....#.....#.#...#  
                        |  #.#####.###.###.#.#.#########.#  
                        |  #...#.#.....#...#.#.#.#.....#.#  
                        |  #.###.#####.###.###.#.#.#######  
                        |  #.#.........#...#.............#  
                        |  #########.###.###.#############  
                        |           B   J   C               
                        |           U   P   P               """.trimMargin()

            assertThat(
                findQuickestPath(parsePortalDonut(input)),
                equalTo(58)
            )
        }

        @Test
        internal fun part1() {
            assertThat(
                findQuickestPath(parsePortalDonut(input)),
                equalTo(604)
            )
        }
    }

    @Nested
    inner class Part2 {

        @Test
        internal fun testInput1() {
            val input = """
                        |             Z L X W       C                 
                        |             Z P Q B       K                 
                        |  ###########.#.#.#.#######.###############  
                        |  #...#.......#.#.......#.#.......#.#.#...#  
                        |  ###.#.#.#.#.#.#.#.###.#.#.#######.#.#.###  
                        |  #.#...#.#.#...#.#.#...#...#...#.#.......#  
                        |  #.###.#######.###.###.#.###.###.#.#######  
                        |  #...#.......#.#...#...#.............#...#  
                        |  #.#########.#######.#.#######.#######.###  
                        |  #...#.#    F       R I       Z    #.#.#.#  
                        |  #.###.#    D       E C       H    #.#.#.#  
                        |  #.#...#                           #...#.#  
                        |  #.###.#                           #.###.#  
                        |  #.#....OA                       WB..#.#..ZH
                        |  #.###.#                           #.#.#.#  
                        |CJ......#                           #.....#  
                        |  #######                           #######  
                        |  #.#....CK                         #......IC
                        |  #.###.#                           #.###.#  
                        |  #.....#                           #...#.#  
                        |  ###.###                           #.#.#.#  
                        |XF....#.#                         RF..#.#.#  
                        |  #####.#                           #######  
                        |  #......CJ                       NM..#...#  
                        |  ###.#.#                           #.###.#  
                        |RE....#.#                           #......RF
                        |  ###.###        X   X       L      #.#.#.#  
                        |  #.....#        F   Q       P      #.#.#.#  
                        |  ###.###########.###.#######.#########.###  
                        |  #.....#...#.....#.......#...#.....#.#...#  
                        |  #####.#.###.#######.#######.###.###.#.#.#  
                        |  #.......#.......#.#.#.#.#...#...#...#.#.#  
                        |  #####.###.#####.#.#.#.#.###.###.#.###.###  
                        |  #.......#.....#.#...#...............#...#  
                        |  #############.#.#.###.###################  
                        |               A O F   N                     
                        |               A A D   M                     """.trimMargin()
//            assertThat(findQuickestPath2(parsePortalDonut(input)), equalTo(396))
        }

        @Test
        internal fun part2() {

        }
    }

}

private val input = """
|                                         U     I     L           T     D     G                                             
|                                         T     Z     X           A     Z     G                                             
|  #######################################.#####.#####.###########.#####.#####.###########################################  
|  #...#.....#.......#.#.#...#.#.#.#.....#...#.....#.......#.........#.......#.#...#.............#...#...#...........#...#  
|  ###.###.#######.###.#.#.###.#.#.###.#.###.#.#.#######.#####.#.###.#####.###.###.#.###############.#.#####.###.#######.#  
|  #.....#...........................#.#.....#.#...#.....#.....#.#.#.#.......#.#.#.......#.#.....#.....#...#.#.#.#.#.....#  
|  ###.###.#.#.#####.###.###.###.#####.#######.#####.#.###.#.#.###.#.#######.#.###.#.#####.###.###.#######.###.#.#.###.#.#  
|  #.#...#.#.#.#.....#.#.#...#.........#.....#.....#.#.#.#.#.#...#...#.....#.#.....#.......#...#.#.#.....#.#...#...#...#.#  
|  #.#.#############.#.#.###.#.#######.#.#.#.###.###.#.#.###.#######.#.###.#.#######.#########.#.#.#.#####.###.#.#.###.###  
|  #.#.#.#.#.#.#.......#.#...#.#.........#.#.#...#.#.#...#...#...#...#...#.#.#...........................#.#.....#.......#  
|  #.#.#.#.#.#.###.#.#.#####.###.#.###.###.###.#.#.#####.#######.###.#.#.#.#.#####.#####.###.#.###.#####.#.#.###########.#  
|  #.....#...#.#.#.#.#.#.....#.#.#.#...#.....#.#.#.#...#.#.........#.#.#.#.....#.....#.....#.#.#.#...#.............#.#...#  
|  ###.###.###.#.#############.###.#######.#####.#.#.###.###.#.#.#.#.#.#.#.###.###.#############.###.###.#.#.###.###.#####  
|  #.........#...#.....#.........#.#.....#.....#.....#.....#.#.#.#...#.#.#...#.#...........#.......#...#.#.#.#.#.......#.#  
|  ###.#######.#####.#####.#.###.#######.#.#.#####.#.###.###########.#.#.###.#####.#########.#########.#####.#.#.#######.#  
|  #.#.#.#.....#...#...#...#...#.#.#.....#.#...#.#.#.#...#.#...#.#...#.#...#.#.#.#.#.#.#.#.#...#.#...#...#...#.#...#.....#  
|  #.#.#.###.#.###.#.###########.#.#####.###.###.#.###.###.#.###.###.#.#######.#.#.#.#.#.#.#.###.#.#####.###.#.#.###.#####  
|  #.#.....#.#.........#.#...#.......#.......#.......#.....#.....#.#.#...#...#.........#.........#.#.#.#.#.....#.#.#.....#  
|  #.#.#########.#.#####.#.#.#####.###.###.#.#######.#.#.#####.#.#.#.###.###.#######.#####.#####.#.#.#.#####.#####.###.#.#  
|  #.........#...#.#...#...#.....#.....#...#.....#...#.#...#.#.#.#.#.#.......#...#...#.#...#...............#...#...#.#.#.#  
|  ###.###.#######.#.#.#########.#.###.#.###########.###.###.#.#.###.#.#.#.#.###.###.#.###.###.#.#.#.#.###########.#.###.#  
|  #.....#...#.....#.#.#.#.........#...#.#...#.......#.#.#...#.#.....#.#.#.#.#.#.#.....#.....#.#.#.#.#...#...#.#...#.#...#  
|  ###.###.#####.#.#.###.#############.#####.###.###.#.#.###.#.###.#.#.###.###.#.#.###.###.#.###.#########.###.###.#.#.#.#  
|  #.....#.#.#.#.#.#.....#...#.#...#.#.#.#.......#...#...#...#...#.#.#...#.#.........#.#...#...#.#.......#.#.......#.#.#.#  
|  ###.###.#.#.###.###.###.#.#.###.#.#.#.#########.#####.#.#.#.#.#####.#####.#.###.#####.#.#######.#######.###.#.###.#.###  
|  #.....#.#...#...#.#.#.#.#...#.............#.#.....#...#.#.#.#.#.........#.#...#...#.#.#.........#.....#...#.#.........#  
|  ###.#######.###.#.#.#.#####.#####.###.#.###.#.###.#.###.#.###.#####.#######.#.###.#.#.#######.#.#####.#.#####.#########  
|  #.......#...#...#.#...#.....#.#.#.#...#.#.#...#...#.....#.#.....#.....#.#...#.#.............#.#...#...#...#.........#.#  
|  #.#.###.###.#.#.#.###.#.###.#.#.#####.###.#######.#######.#.###.###.###.#######.###.###.#########.###.#.#####.###.###.#  
|  #.#...#.#...#.#.......#.#.#.....#...#.#...#.........#.....#...#.#.......#.........#...#.....#.#.#.#.#.#.#.#.#...#.....#  
|  #.###.###.#######.###.###.#.#####.###.#.#########.###.#####.#######.#.#######.###.#######.###.#.###.#.#.#.#.#.#########  
|  #.#.......#...#.#.#.#.....#.....#...#.....#.#.....#...#.#.#.....#.#.#...#.#...#.......#.#.........#.........#...#...#.#  
|  ###.#########.#.###.###.#.###.###.###.#####.###.#####.#.#.###.###.#.#####.#######.###.#.#####.#.###.###.#####.#.###.#.#  
|  #...#.....#...........#.#...#...#.......#.........#.......#.......#...........#...#.........#.#.#.#.#...#...#.#.#.....#  
|  ###.#.#######.#####.#####.###.#######.#########.#######.###.#######.###########.#######.#######.#.#####.#.#.#.###.#####  
|  #.#...#...#.#.#.........#...#...#    D         Z       L   D       H           N      #...#...#.#.#.....#.#.#.....#.#.#  
|  #.###.###.#.###.#####.#####.#.#.#    Z         O       M   Q       T           J      #######.###.#####.#.###.#####.#.#  
|  #.......#.#.#.#.#.#.....#.#...#.#                                                     #...#.........#...#.......#.#.#.#  
|  ###.#####.#.#.###.###.###.#.###.#                                                     #.#.#.###########.###.#####.#.#.#  
|  #...#.....#...#...#.......#.#.#.#                                                   CQ..#.#.....#.#.#...........#.....#  
|  ###.#####.#.#####.###.#.###.#.###                                                     #.###.###.#.#.#.#########.###.#.#  
|  #.....................#.#.....#.#                                                     #...#.#.#.#.........#...#...#.#..OS
|  ###.#.#.#.#.#.#######.#####.#.#.#                                                     #.###.#.#########.#.#.#.###.#.###  
|  #...#.#.#.#.#...#.......#...#.#..OS                                                   #...#.#.#...#...#.#...#.#.#.#...#  
|  #.#####.#.#######.#.#####.#.#.#.#                                                     #.###.#.###.###########.#.#.#.###  
|  #.#.#...#.#.#.#.#.#.#.#.#.#.#...#                                                     #.........................#.....#  
|  #.#.#######.#.#.###.###.###.#####                                                     #################################  
|NJ..........#.....#.#.........#.#.#                                                     #...#...............#.#.....#...#  
|  #############.###.###########.#.#                                                     #.#.#.#.#.###.###.###.###.#.#.#.#  
|  #.......#.....#...........#......RW                                                   #.#...#.#.#.....#.......#.#...#.#  
|  #.#####.#.###.#.#####.###.#.#.###                                                     #.#.#.###.###.###.#####.#.#.###.#  
|  #...#...#...#.#.#.#...#.....#...#                                                     #.#.#.#.#.#...#...#.#...#.#...#..WL
|  ###.#.###.###.#.###.###.#########                                                     #.#####.#####.#.###.#.#.#.#.###.#  
|  #.#.#.....#...#...#.#.....#...#.#                                                   VO....#.#.......#.#...#.#...#.#.#.#  
|  #.#.#.#.###.#####.###.#.###.###.#                                                     ###.#.#######.#.###.###.#####.###  
|HD....#.#.#.#.........#.#.#.#.....#                                                     #.....#.#.#...#.#.#...#.#.....#.#  
|  #########.###############.###.###                                                     ###.#.#.#.#######.#.#######.#.#.#  
|  #...#.#.............#.......#...#                                                     #...#...#.#.....#.#...#.#...#....KW
|  #.#.#.#.#.#.#.#.###.#####.#.#.#.#                                                     #########.#.#####.#.###.#.###.###  
|  #.#...#.#.#.#.#.#.....#...#.#.#.#                                                   SB....#.#...#...#.#.....#.#...#...#  
|  #.#.###.###.###.#####.#.###.#.#.#                                                     #.#.#.#.###.###.#.#.###.#.###.###  
|  #.#.#.....#.#.#.#.#...#...#...#.#                                                     #.#...............#.......#...#.#  
|  #.#.###.#.#.#.###.###.#.###.###.#                                                     #####.#.#.###.#.###.###########.#  
|SN..#.....#.#.#.#.#.#.#...#.#.#....AR                                                   #.#...#.#.#...#...#.#.........#..HT
|  #.#.#########.#.#.#.#####.#######                                                     #.#####.###.#.#######.#######.#.#  
|  #.#.....#.......................#                                                     #...#.#.#...#...#.#.......#...#.#  
|  #########.#######.#.#####.###.###                                                     ###.#.#.#########.#####.#.#.###.#  
|VO..#.#.#.......#.#.#...#...#...#..TA                                                 XM....#.#.#.....#.......#.#.#.#....ZZ
|  #.#.#.#######.#.#.#.#########.#.#                                                     #.###.#####.#####.#.#.###.#.###.#  
|  #...........#...#.#...#.........#                                                     #.................#.#.....#.....#  
|  ###.#.#.#######.#####.###.#.###.#                                                     #################################  
|  #.#.#.#.........#.#.#.#...#...#.#                                                     #.......#...........#............LM
|  #.###############.#.#############                                                     #.###.#.#.###.#.###.###.#########  
|  #...................#...#...#.#.#                                                   IZ....#.#...#...#...#...#.......#.#  
|  ###.#.#.###.#.#.###.###.#.#.#.#.#                                                     #.#######.###########.#.#####.#.#  
|  #.#.#.#...#.#.#.#.....#...#.#....GG                                                   #.#.#.......#...#.....#.#.......#  
|  #.###.#######.#.#####.#.###.#.###                                                     ###.###.###.###.#.#.#####.#####.#  
|HR....#.....#.#.#.#...#.#.#.......#                                                     #.#...#.#.....#.#.#.......#.#...#  
|  ###.###.#.#.#######.#.#.#.###.###                                                     #.###.#####.###.#########.#.#.#.#  
|  #.......#.#.#.#.........#...#.#.#                                                     #.......#...#...........#...#.#.#  
|  #.#.#.#.###.#.#########.#######.#                                                     #.#################.###.#######.#  
|  #.#.#.#.#.#.#.#.#.........#......MJ                                                   #...#.........#...#...#.#.#...#.#  
|  #########.#.#.#.#######.#####.###                                                     #.#####.#######.#####.#.#.#.#####  
|OJ....#.#...........#.#...#.....#.#                                                   UT......#...#.#.#.#...#.#.#.....#..DQ
|  #.###.#.#.#####.###.#####.###.#.#                                                     ###.###.###.#.#.#####.#.#.###.#.#  
|AA........#...#.............#...#.#                                                     #.....................#...#.#...#  
|  #########################.#####.#                                                     #########.#################.#.###  
|  #.....................#.#.#...#.#                                                     #.....#...#...#.........#...#...#  
|  ###.#.###.#.#.#.#####.#.#####.#.#                                                     #.###.###.#.#.#.#####.#.#.#.#####  
|YX....#.#...#.#.#.#.#...#.#.#.#...#                                                     #...#...#.#.#.......#.#...#.#.#.#  
|  #.#.###.#.###.###.#.###.#.#.###.#                                                     ###.#.#####.#.#######.#.###.#.#.#  
|  #.#.#...#...#.#.....#.........#..KW                                                   #.#.#.....#.#...#.....#.#...#....XM
|  ###.###.#####.###.#.#.###.#.###.#                                                     #.#.###.###.#######.#####.#.#.#.#  
|  #...#.......#...#.#.....#.#.....#                                                   HR....#...........#.#.#.....#...#.#  
|  #####.###.###.#######.#####.###.#                                                     #.#.###.#.###.###.#########.###.#  
|  #.....#.....#.#.........#.....#.#                                                     #.#.#...#.#.........#.......#.#.#  
|  #.#.#.###.#####.#.#.#.#####.#.###    L   W     H           S   H           Y     O    #.#####.###.#######.#######.#.#.#  
|  #.#.#.#.....#...#.#.#.#.#...#.#.#    X   L     D           N   G           X     J    #...#...#.........#.#.#.#.....#.#  
|  #.###.#.#.#####.###.###.#######.#####.###.#####.###########.###.###########.#####.#####.#######.#.#########.#.#.#.#.#.#  
|  #...#.#.#...#.....#.......#.....#...........#.........#.#.#.#.#...#.........#.......#...#.......#.............#.#.#.#.#  
|  #.#########.###.###.#.#########.#####.#############.###.#.#.#.#.#######.#.#.#.###.#.###.#####.#####.#.#.###.#.###.#.#.#  
|  #.....#.#.#.#.....#.#.#.......#.#.#...#.#...#.......#.....#.#.#.....#...#.#.#.#...#...#...#.#.....#.#.#...#.#.#.#.#.#.#  
|  #.#.###.#.#.###.###.#######.#.#.#.###.#.#.###.#.#.#.#.###.#.#.#.#######.#####.#############.#.#####.###.#.#.#.#.#.###.#  
|  #.#.#.......#...#...#.#...#.#.............#.#.#.#.#.#.#...#...#...#.#...#.#.....#.#.#...#...#.#.....#...#.#.#.#...#...#  
|  #.###.#.#####.#####.#.###.###############.#.#.#####.#.###.#.#####.#.#.###.###.###.#.#.###.#.#.#######.###.###.###.#####  
|  #...#.#.#.#.....#.......#.......#.#.......#.......#.#...#.......#...#.#...#...............#.#.#...#.....#...#.#.......#  
|  #.#.###.#.#.#####.#.#.###.###.#.#.###.###.#####.#.#.###.###########.#.#.#.###.###.#.#.#.#.#######.#.#.#########.#.###.#  
|  #.#.#...#.....#...#.#...#.#.#.#.........#.#.....#.#.#.......#.#.#...#.#.#...#...#.#.#.#.#...#...#...#.........#.#...#.#  
|  #.#####.###.###.###.#######.###.###.#.#######.#########.###.#.#.###.#.#.###.#######.#########.#####.#.#.#.#.###.#.#.#.#  
|  #.#.....#.....#.#.....#...#.......#.#.....#.....#.#...#.#...#.......#...#.....#.#.#...#...........#.#.#.#.#...#.#.#.#.#  
|  #.#.#.#.#####.#####.###.###.#.###.###.#####.###.#.###.###.###.###.###.###.###.#.#.#.###.###.###.#.#.###.#.#.#####.###.#  
|  #.#.#.#...#...#.#.#.#...#.#.#.#.#.#.......#.#.....#.........#.#.....#.#.#.#...#.......#...#.#...#.#...#.#.#.....#.#.#.#  
|  #.#.#.#.#.#####.#.#####.#.#####.###.#.#.#####.#####.#####.#######.#.###.#.#######.#.#.#.#######.#.###########.#####.#.#  
|  #.#.#.#.#.#.....#...#.......#.....#.#.#.#...#.....#.#.......#.#.#.#...#.....#.#...#.#...#.#...#.#.#.....#.#.#...#.#...#  
|  #.###.#.#######.###.#######.#####.###.###.###.#############.#.#.###.###.###.#.###.#######.#.#######.#.###.#.#####.###.#  
|  #...#.#.#.............#.#...................#.....#.............#...#.#...#.#.#...#.....#.....#.....#.#.#.....#.#...#.#  
|  ###.###########.#####.#.#######.#.###.###.#.###.#.#######.#.#.#####.#.#.###.#.#.#.###.###.#####.###.###.#.#####.#.###.#  
|  #.......#.#.#.#.#.....#.#...#...#.#.....#.#.#...#.#.......#.#.#...#...#...#...#.#.#.......#.......#.#...#.#.#...#...#.#  
|  #.#.#####.#.#.#####.#.#.#.###########.#######.#.#####.#####.#####.#.#######.#.###.#.#####.#.#.#.#######.#.#.#.###.#####  
|  #.#.#.......#...#...#...#...#.#.........#.#...#.#...#.#.....#.....#.#.......#.#.........#...#.#...#.#.......#.........#  
|  #.#######.#####.###.###.#.###.#######.#.#.#.#.###.#.#####.###.#.###.#####.#.#.#####.#####.#########.#.###.#.###.#####.#  
|  #.#.........#.......#.............#.#.#...#.#.....#.#.....#...#.....#...#.#.#.#.#.#.#...#...#.......#.#...#.........#.#  
|  #####.#.#######.#####.#.###.###.###.#.#.#####.#######.#.#.#.#.#####.#.#####.###.#.#.###.#####.#.###.#.###.#####.#.###.#  
|  #.#...#.........#.#...#...#.#.#.#.#...#.#.......#.#...#.#.#.#.#...#.......#...#.............#.#.#.....#.....#...#...#.#  
|  #.#.#####.#.#####.#.###.#####.#.#.#####.###.#.###.###.###.###.#.#.#########.#######.###.###.#.#####.#####.#######.#####  
|  #...#.....#.#.......#...#.................#.#.#...#.#.#.....#...#...#.#.....#.#.#...#.....#.....#.#.#...#.......#.#.#.#  
|  #####.#.#.#.#.#.#.###########.###.#.#.#######.###.#.#.#############.#.#####.#.#.###.#########.###.#####.#.#.#.#####.#.#  
|  #.#.#.#.#.#.#.#.#.#.#.#.........#.#.#.#.#...#.......#...#.#...#.......#.#.#.#.....#...#.#.#...#.#.#.#.#.#.#.#.........#  
|  #.#.#.###.#.###.###.#.#.#####.#.###.#.#.###.#######.###.#.#.#####.#####.#.#.#.#.###.#.#.#.###.#.#.#.#.#.###.###.###.###  
|  #.....#...#.#...#.......#.....#...#.#.......#.......#.......#.....#.........#.#.....#.....#...............#...#.#.....#  
|  #########################################.#.#.#############.###.#######.#####.#########################################  
|                                           S R M             H   C       A     Z                                           
|                                           B W J             G   Q       R     O                                           
""".trimMargin()
